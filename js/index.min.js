function CustomSearch(e){$.get("pages/"+e+".html").done(function(t){ractive.set("dataout",t),"contact"==e&&$(".floating-labels").length>0&&(floatLabels(),CheckRequired(),$('input[type="submit"]').click(function(e){CheckBefore(),1!=BeforeSubmit()&&e.preventDefault()}))})}function SetHashLocation(e){window.location.hash="#"+e}function OnHashChange(){var e=window.location.hash.substring(1);""!=e?CustomSearch(e):closeModal(),$('[data-type="modal-trigger"]').each(function(){""==e||$(this).attr("name")!=e||$(this).hasClass("to-circle")||OpenModal($(this))})}function WhichTransitionEvent(){var e,t=document.createElement("fakeelement");const a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a)if(void 0!==t.style[e])return a[e]}function OpenModal(e){var t=retrieveScale(e.next(".cd-modal-bg"));e.addClass("to-circle"),e.next(".cd-modal-bg").addClass("is-visible").one(transitionEvent,function(){animateLayer(e.next(".cd-modal-bg"),t,!0)}),e.parents(".no-csstransitions").length>0&&animateLayer(e.next(".cd-modal-bg"),t,!0)}function retrieveScale(e){var t=e.width()/4,a=e.offset().left+t,o=e.offset().top+t-$(window).scrollTop(),n=scaleValue(o,a,t,$(window).height(),$(window).width());return e.css("position","fixed").velocity({top:o-t,left:a-t,translateX:0},0),n}function scaleValue(e,t,a,o,n){var i=t>o/2?t:o-t,s=e>n/2?e:n-e;return Math.ceil(Math.sqrt(Math.pow(i,2)+Math.pow(s,2))/a)}function animateLayer(e,t,a){e.velocity({scale:t},400,function(){$("body").toggleClass("overflow-hidden",a),a?e.parents(".cd-section").addClass("modal-is-visible").end().off(transitionEvent):e.removeClass("is-visible").removeAttr("style").siblings('[data-type="modal-trigger"]').removeClass("to-circle")})}function updateLayer(){var e=$(".cd-section.modal-is-visible").find(".cd-modal-bg"),t=e.width()/2,a=e.siblings(".box").offset().top+t-$(window).scrollTop(),o=e.siblings(".box").offset().left+t,n=scaleValue(a,o,t,$(window).height(),$(window).width());e.velocity({top:a-t,left:o-t,scale:n},0)}function closeModal(){var e=$(".cd-section.modal-is-visible");e.removeClass("modal-is-visible").one(transitionEvent,function(){animateLayer(e.find(".cd-modal-bg"),1,!1)}),e.parents(".no-csstransitions").length>0&&animateLayer(e.find(".cd-modal-bg"),1,!1)}function floatLabels(){$(".floating-labels .cd-label").next().each(function(){$(this).on("change keyup",function(){""!=$(this).val()?$(this).prev(".cd-label").addClass("float"):$(this).prev(".cd-label").removeClass("float")})})}function CheckRequired(){$(".required").each(function(){$(this).on("keyup keypress blur change",function(){const e=/^[a-zA-Z]+$/,t=/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;var a,o=$(this).val();"cd-name"==$(this).attr("id")&&(a=e),"cd-email"==$(this).attr("id")&&(a=t),o.match(a)&&0!=o.length&&""!=o?$(this).removeClass("error"):$(this).addClass("error")})})}function BeforeSubmit(){if($(".cd-form").find("input, textarea").hasClass("error")){var e=$(".error").attr("id"),t=$(".error-message");return $(".error").length>1?t.html("<p>Please fill out the required fields.</p>"):"cd-name"==e?t.html("<p>Please enter your NAME (only letters).</p>"):"cd-email"==e?t.html("<p>Please enter a valid EMAIL address.</p>"):"cd-textarea"==e&&t.html("<p>Write me a message.</p>"),t.removeClass("hide"),!1}return!0}function CheckBefore(){$(".required").each(function(){0==$(this).val()&&$(this).addClass("error")})}Ractive.DEBUG=!1,window.onhashchange=OnHashChange,window.onload=OnHashChange;const box1=$(".box-1"),box2=$(".box-2"),box3=$(".box-3"),box4=$(".box-4");box1.addClass("hover").delay(300).queue(function(e){$(this).removeClass("hover"),e(),box2.addClass("hover").delay(300).queue(function(e){$(this).removeClass("hover"),e(),box3.addClass("hover").delay(300).queue(function(e){$(this).removeClass("hover"),e(),box4.addClass("hover").delay(300).queue(function(e){$(this).removeClass("hover"),e(),box3.addClass("hover").delay(300).queue(function(e){$(this).removeClass("hover"),e(),box2.addClass("hover").delay(300).queue(function(e){$(this).removeClass("hover"),e(),box1.addClass("hover").delay(300).queue(function(e){$(this).removeClass("hover"),e()})})})})})})});var ractive=new Ractive({el:".cd-modal-content",template:"#template",debug:!1});const transitionEvent=WhichTransitionEvent();$('[data-type="modal-trigger"]').on("click",function(){SetHashLocation($(this).attr("name")),OpenModal($(this))}),$(document).keyup(function(e){"27"==e.which&&closeModal()}),$(window).on("resize",function(){$(".cd-section.modal-is-visible").length>0&&window.requestAnimationFrame(updateLayer)});